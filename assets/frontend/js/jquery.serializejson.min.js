!function(e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof exports){var n=require("jquery");module.exports=e(n)}else e(window.jQuery||window.Zepto||window.$)}(function($){"use strict";$.fn.serializeJSON=function(e){var n,r,t,a,i,s,u,o,l,p,c;return n=$.serializeJSON,r=this,t=n.setupOpts(e),a=r.serializeArray(),n.readCheckboxUncheckedValues(a,t,r),i={},$.each(a,function(e,a){s=a.name,u=a.value,o=n.extractTypeAndNameWithNoType(s),l=o.nameWithNoType,p=o.type,p||(p=n.tryToFindTypeFromDataAttr(s,r)),n.validateType(s,p,t),"skip"!==p&&(c=n.splitInputNameIntoKeysArray(l),u=n.parseValue(u,s,p,t),n.deepSet(i,c,u,t))}),i},$.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},"boolean":function(e){var n=["false","null","undefined","","0"];return-1===n.indexOf(e)},"null":function(e){var n=["false","null","undefined","","0"];return-1===n.indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(e){return $.serializeJSON.parseValue(e,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(e){var n,r,t,a,i,s;s=$.serializeJSON,null==e&&(e={}),t=s.defaultOptions||{},r=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(n in e)if(-1===r.indexOf(n))throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+r.join(", "));return a=function(n){return e[n]!==!1&&""!==e[n]&&(e[n]||t[n])},i=a("parseAll"),{checkboxUncheckedValue:a("checkboxUncheckedValue"),parseNumbers:i||a("parseNumbers"),parseBooleans:i||a("parseBooleans"),parseNulls:i||a("parseNulls"),parseWithFunction:a("parseWithFunction"),typeFunctions:$.extend({},a("defaultTypes"),a("customTypes")),useIntKeysAsArrayIndex:a("useIntKeysAsArrayIndex")}},parseValue:function(e,n,r,t){var a,i;return a=$.serializeJSON,i=e,t.typeFunctions&&r&&t.typeFunctions[r]?i=t.typeFunctions[r](e):t.parseNumbers&&a.isNumeric(e)?i=Number(e):!t.parseBooleans||"true"!==e&&"false"!==e?t.parseNulls&&"null"==e&&(i=null):i="true"===e,t.parseWithFunction&&!r&&(i=t.parseWithFunction(i,n)),i},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var n,r=[];for(n in e)r.push(n);return r},readCheckboxUncheckedValues:function(e,n,r){var t,a,i,s,u;null==n&&(n={}),u=$.serializeJSON,t="input[type=checkbox][name]:not(:checked):not([disabled])",a=r.find(t).add(r.filter(t)),a.each(function(r,t){i=$(t),s=i.attr("data-unchecked-value"),s?e.push({name:t.name,value:s}):u.isUndefined(n.checkboxUncheckedValue)||e.push({name:t.name,value:n.checkboxUncheckedValue})})},extractTypeAndNameWithNoType:function(e){var n;return(n=e.match(/(.*):([^:]+)$/))?{nameWithNoType:n[1],type:n[2]}:{nameWithNoType:e,type:null}},tryToFindTypeFromDataAttr:function(e,n){var r,t,a,i;return r=e.replace(/(:|\.|\[|\]|\s)/g,"\\$1"),t='[name="'+r+'"]',a=n.find(t).add(n.filter(t)),i=a.attr("data-value-type"),i||null},validateType:function(e,n,r){var t,a;if(a=$.serializeJSON,t=a.optionKeys(r?r.typeFunctions:a.defaultOptions.defaultTypes),n&&-1===t.indexOf(n))throw new Error("serializeJSON ERROR: Invalid type "+n+" found in input name '"+e+"', please use one of "+t.join(", "));return!0},splitInputNameIntoKeysArray:function(e){var n,r;return r=$.serializeJSON,n=e.split("["),n=$.map(n,function(e){return e.replace(/\]/g,"")}),""===n[0]&&n.shift(),n},deepSet:function(e,n,r,t){var a,i,s,u,o,l;if(null==t&&(t={}),l=$.serializeJSON,l.isUndefined(e))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");a=n[0],1===n.length?""===a?e.push(r):e[a]=r:(i=n[1],""===a&&(u=e.length-1,o=e[u],a=l.isObject(o)&&(l.isUndefined(o[i])||n.length>2)?u:u+1),""===i?(l.isUndefined(e[a])||!$.isArray(e[a]))&&(e[a]=[]):t.useIntKeysAsArrayIndex&&l.isValidArrayIndex(i)?(l.isUndefined(e[a])||!$.isArray(e[a]))&&(e[a]=[]):(l.isUndefined(e[a])||!l.isObject(e[a]))&&(e[a]={}),s=n.slice(1),l.deepSet(e[a],s,r,t))}}});