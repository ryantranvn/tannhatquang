function showSmartAlert(e,t,i,r,a,s){$("body").css({overflow:"hidden"}),$.SmartMessageBox({title:e,content:t,buttons:i},function(e){"YES"===e?"function"==typeof r&&r():"NO"===e?"function"==typeof a&&a():"CANCEL"===e&&"function"==typeof s&&s(),$("body").css({overflow:"auto"})})}function replySuccess(e){return htmlStr='<div class="row reply">',htmlStr+='<div class="alert alert-success alert-block">',htmlStr+='<a class="close" data-dismiss="alert" href="#">×</a>',htmlStr+='<h4 class="alert-heading">Success!</h4>',htmlStr+=e,htmlStr+="</div>",htmlStr+="</div>",htmlStr}function replyError(e){return htmlStr='<div class="row reply">',htmlStr+='<div class="alert alert-danger alert-block">',htmlStr+='<a class="close" data-dismiss="alert" href="#">×</a>',htmlStr+='<h4 class="alert-heading">Error!</h4>',htmlStr+=e,htmlStr+="</div>",htmlStr+="</div>",htmlStr}function tableCommon(){jQuery(idTableList).jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,defaultSearch:"cn"}),$(".ui-jqgrid").removeClass("ui-widget ui-widget-content"),$(".ui-jqgrid-view").children().removeClass("ui-widget-header ui-state-default"),$(".ui-jqgrid-labels, .ui-search-toolbar").children().removeClass("ui-state-default ui-th-column ui-th-ltr"),$(".ui-jqgrid-pager").removeClass("ui-state-default"),$(".ui-jqgrid").removeClass("ui-widget-content"),$(".ui-jqgrid-htable").addClass("table table-bordered table-hover"),$(".ui-jqgrid-btable").addClass("table table-bordered table-striped"),$(".ui-pg-div").removeClass().addClass("btn btn-sm btn-primary"),$(".ui-icon.ui-icon-plus").removeClass().addClass("fa fa-plus"),$(".ui-icon.ui-icon-pencil").removeClass().addClass("fa fa-pencil"),$(".ui-icon.ui-icon-trash").removeClass().addClass("fa fa-trash-o"),$(".ui-icon.ui-icon-search").removeClass().addClass("fa fa-search"),$(".ui-icon.ui-icon-refresh").removeClass().addClass("fa fa-refresh"),$(".ui-icon.ui-icon-disk").removeClass().addClass("fa fa-save").parent(".btn-primary").removeClass("btn-primary").addClass("btn-success"),$(".ui-icon.ui-icon-cancel").removeClass().addClass("fa fa-times").parent(".btn-primary").removeClass("btn-primary").addClass("btn-danger"),$(".ui-icon.ui-icon-seek-prev").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-prev").removeClass().addClass("fa fa-backward"),$(".ui-icon.ui-icon-seek-first").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-first").removeClass().addClass("fa fa-fast-backward"),$(".ui-icon.ui-icon-seek-next").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-next").removeClass().addClass("fa fa-forward"),$(".ui-icon.ui-icon-seek-end").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-end").removeClass().addClass("fa fa-fast-forward"),$(window).on("resize.jqGrid",function(){$(idTableList).jqGrid("setGridWidth",$("#content").width())})}function actionSaveRow(e){jQuery(idTableList).jqGrid("saveRow",e,{aftersavefunc:function(e,t){responseText=$.parseJSON(t.responseText),"OK"==responseText.text?($(".reply").length>0&&$(".reply").remove(),$("#widget-grid").prepend(replySuccess("Edit data successful."))):($(".reply").length>0&&$(".reply").remove(),$("#widget-grid").prepend(replyError("Error edit data.")))}})}function captionButton(e,t){return caption="",1==e&&1==permissionsMember[currentModule.control_name][2]&&(caption+='<a id="btnAdd" href="'+bUrl+currentModule.url+'/add" class="btnTop btn btn-success"><i class="fa fa-plus"></i> Add</a>'),1==t&&1==permissionsMember[currentModule.control_name][4]&&(caption+='<a id="btnMultiDelete" href="#" class="btnTop btn btn-danger"><i class="fa fa-trash-o"></i> Delete</a>'),caption}function captionExport(e){return'<a id="btnExport" href="'+bUrl+e+'/export_db" class="btnTop btn btn-primary"><i class="fa fa-cloud-download"></i> Export</a>'}function captionImport(e){return'<a id="btnImport" href="#" class="btnTop btn btn-default"><i class="fa fa-cloud-upload"></i> Import</a>'}function btnEditInline(e){return buttons="",1==permissionsMember[currentModule.control_name][3]&&(buttons+='<a href="'+bUrl+currentModule.url+"/edit/"+e+'" data-id="'+e+'" class="btn btn-primary btn-xs btnEdit"><i class="fa fa-edit"></i></a>'),buttons}function bntDeleteInline(e){return buttons="",1==permissionsMember[currentModule.control_name][4]&&(buttons+='<a href="'+bUrl+currentModule.url+"/delete/"+e+'" data-id="'+e+'" class="btn btn-danger btn-xs btnDelete"><i class="fa fa-trash-o"></i></a>'),buttons}function init_Radio(){$(".radioWrapper").length>0&&$("body").find(".radioWrapper").each(function(){var e=$(this).attr("id"),t=$("#"+e),i=t.find("input[name=status]:checked");void 0!=i&&(i.parent("label").addClass("active"),i.parent("label").addClass(arrStatus[i.val()][0]),i.parent("label").addClass(arrStatus[i.val()][1])),t.on("click","label.btn",function(){var e=$(this),t=e.children("input"),i=e.parent(".btn-group"),r=t.is(":checked");r||(i.find("input:checked").removeAttr("checked"),i.find("label").attr("class","btn btn-default"),e.addClass(arrStatus[t.val()][0]).addClass(arrStatus[t.val()][1]),t.attr("checked","checked"))})})}function formatButton(e,t,i,r,a){return activeClass=arrStatus[t][0]+" "+arrStatus[t][1],fa='<button id="'+i+e+'" class="btn '+r+" "+activeClass+'" data-id="'+e+'" data-toggle="modal" data-target="#'+a+'">',fa+=t,fa+="</button>",fa}function click_btnInGrid(e,t,i,r){var a;$("."+e).click(function(){a=$(this).attr("id"),$("#"+t+" .modal-content").position({my:"left top",at:"left top",of:$(this)})}),$("#"+t).parent().on("webkitTransitionEnd oTransitionEnd transitionend msTransitionEnd",function(){-1==$("#"+t).attr("class").indexOf("in")&&$("#"+t+" .modal-content").css({left:"0px",top:"0px"})}),$("#"+t+" .btn").click(function(){var e=$("#"+a).html(),s=$(this).attr("data-value");$("#"+t).modal("hide"),e!=s&&(id=$("#"+a).attr("data-id"),$.ajax({url:i,type:"POST",cache:!1,dataType:"text",data:{id:id,value:s,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){"true"==e?"function"==typeof r&&r():"false"==e?showSmartAlert("Error","Can send data. Please contact to admin.","[YES]"):showSmartAlert("Error","You does not have permission to edit data. Please contact to admin.","[YES]")},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}}))})}function treeView(){$(".tree").length>0&&($(".tree").find("li").addClass("parent_li").attr("role","treeitem").children("span").on("click",function(){$(".tree").find("li").children("span").removeClass("label-success"),$(this).addClass("label-success"),$(this).closest(".wrap_tree").find("input[name=selected_category_id]").val($(this).attr("data-id")),$(this).closest(".wrap_tree").find("input[name=parent_id]").val($(this).closest("ul").prev("span").attr("data-id"))}),$("body").on("click",".tree ul li span i",function(){sub=$(this).parent("span").parent("li").children("ul"),-1!=$(this).attr("class").indexOf("fa-minus-circle")?("undefined"!=sub&&sub.hide("fast"),$(this).removeClass().addClass("fa fa-sm fa-plus-circle")):("undefined"!=sub&&sub.show("fast"),$(this).removeClass().addClass("fa fa-sm fa-minus-circle"))}),$(".tree").find("li:has(ul)").each(function(){$(this).children("span").children("i").removeClass("fa-plus-circle").addClass("fa-minus-circle")}))}function positiveInteger(){$(".positive-integer").length>0&&$(".positive-integer").numeric({decimal:!1,negative:!1},function(){this.value="",this.focus()})}function openKCFinder(e,t,i){window.KCFinder={callBack:function(t){e.val(t),window.KCFinder=null,"function"==typeof i&&i()}},"images"==t?window.open(libsUrl+"kcfinder/browse.php?type=images&dir=images/public","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600"):"docs"==t?window.open(libsUrl+"kcfinder/browse.php?type=docs&dir=docs/public","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600"):"media"==t&&window.open(libsUrl+"kcfinder/browse.php?type=media&dir=media/public","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}function openKCFinderMulti(e,t,i,r){window.KCFinder={callBackMultiple:function(t){window.KCFinder=null;var i=new Array;""!=e.val()&&(i=JSON.parse(e.val()));for(var a=0;a<t.length;a++)i.push(t[a]);e.val(JSON.stringify(i)),"function"==typeof r&&r()}},"images"==t?window.open(libsUrl+"kcfinder/browse.php?type=images&dir=images/public","kcfinder_multiple","status=0, toolbar=0, location=0, menubar=1, directories=0, resizable=1, scrollbars=0, width=800, height=600"):"docs"==t&&window.open(libsUrl+"kcfinder/browse.php?type=docs&dir=docs/public","kcfinder_multiple","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}function selectFile(e,t,i,r){$("body").on("click",e,function(){("images"==t||"media"==t)&&(thumbnailWrapper=$(this).parent().parent().next(".thumbnailWrapper")),void 0==i||""==i?(inputField=$(this).parent().prev(".inputThumbnail"),openKCFinder(inputField,t,function(){filename=inputField.val(),"images"==t?(typeDir="images/",htmlImg='<img src="'+filename+'" class="thumbnail" />',htmlDel='<a class="thumbnailDel"><i class="fa fa-trash-o"></i></a>',nameLinkInput=inputField.attr("name"),void 0==r||""==r?htmlLink="":1==r&&(htmlLink='<div class="row">',htmlLink+='<label style="float: left; clear: both;">Link</label>',htmlLink+='<input type="text" name="'+nameLinkInput+'_link" class="inputThumbnail form-control" style="float: left; clear: both" />',htmlLink+="</div>"),thumbnailWrapper.html("").html('<div class="thumbnailItem">'+htmlImg+htmlDel+htmlLink+"</div>")):"media"==t&&(htmlStr='<video id="video" width="320" controls="true">',htmlStr+='<source src="'+filename+'">',htmlStr+="Your browser does not support HTML5 video tag. Please download FireFox 3.5 or higher.",htmlStr+="</video><br/>",thumbnailWrapper.html("").html(htmlStr))})):(inputField=$(this).parent().prev(".inputThumbnail"),openKCFinderMulti(inputField,t,r,function(){if("images"==t){typeDir="images/";var e=JSON.parse(inputField.val());htmlImgList="",$.each(e,function(e,t){htmlImg='<img src="'+t+'" class="thumbnail" />',htmlDel='<a class="thumbnailDel"><i class="fa fa-trash-o"></i></a>',void 0==r||""==r?htmlLink="":(htmlLink='<div class="">',htmlLink+='<label style="float: left; clear: both;">Link</label>',htmlLink+='<input type="text" name="thumbnail_links[]" class="form-control" style="float: left; clear: both" />',htmlLink+="</div>"),htmlImgList+='<div class="thumbnailItem">'+htmlImg+htmlDel+htmlLink+"</div>"}),thumbnailWrapper.html("").html(htmlImgList)}}))})}function setOrder(){$(".orderSpinner").length>0&&($(".orderSpinner").spinner({min:0,max:99,step:1,start:1e3,numberFormat:"C"}),$("body").on("change",'input[name="order"]',function(){""==$(this).val()?$(this).val(0):$(this).val()>100&&$(this).val(99)}))}function selectCategory(e,t){$("body").on("click",e,function(){inputField=$(e).parent().next("input"),index=$(this).index(),value=$(this).attr("data-save"),$(e).removeClass("btn-success"),$(this).addClass("btn-success"),inputField.val(value),"function"==typeof t&&t(index,value)})}function capture(e,t){null==t&&(t=1);var i=e.videoWidth*t,r=e.videoHeight*t,a=document.createElement("canvas");a.width=i,a.height=r;var s=a.getContext("2d");return s.drawImage(e,0,0,i,r),a}function shoot(){var e=document.getElementById(videoId),t=document.getElementById("output"),i=capture(e,scaleFactor);i.onclick=function(){window.open(this.toDataURL())},snapshots.unshift(i),t.innerHTML="";for(var r=0;4>r;r++)t.appendChild(snapshots[r])}function valid_login(){$("#login_form").validate({rules:{username:{required:!0,maxlength:255},captcha:{required:!0},password:{required:!0,maxlength:255}},messages:{username:{required:"not empty",maxlength:"must less 255 characters"},password:{required:"not empty",maxlength:"must less 255 characters"},captcha:{required:"not empty"}},submitHandler:function(e){e.submit()}})}function refresh_captcha(){$("#captcha_refesh").click(function(){btnRefesh=$(this),sc=btnRefesh.prev("img").attr("id"),$.ajax({url:bUrl+"auth/ajax_captcha",type:"POST",cache:!1,dataType:"json",data:{sc:sc,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){btnRefesh.prev("img").remove(),btnRefesh.before(e),$('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci"))},error:function(){alert("Error ! Can not load data.")}})})}function dashboardPage(){$("#dashboardPage").length>0&&(module="dashboard")}function memberPage(){if($("#memberPage").length>0){if(module="member",$(idTableList).length>0){var e=":All;active:Active;inactive:Inactive;block:Block";"admin"==authMember.username?caption=captionButton(module,!0,!1):caption=captionButton(module,!1,!1),jQuery("#jqgrid").jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","ID","Username","Avatar","Created Datetime","Action"],colModel:[{name:"status",index:"status",align:"center",width:"100",stype:"select",searchoptions:{sopt:["eq"],value:e}},{name:"id",index:"id",search:!0,align:"center",width:"60"},{name:"username",index:"username",align:"left",search:!0,width:"200"},{name:"thumbnail",index:"thumbnail",align:"center",search:!1,width:"100"},{name:"created_datetime",index:"created_datetime",align:"center",search:!1,width:"150"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})},gridComplete:function(){for(var e=jQuery("#jqgrid").jqGrid("getDataIDs"),t=0;t<e.length;t++){var i=e[t],r=jQuery(idTableList).jqGrid("getRowData",i);if(r.id==authMember.id){var a=btnEditInline(module,i,!0);s=""}else{$("tr#"+r.id).children("td:eq(1)").html("");var a=btnEditInline(module,i,!0)+bntDeleteInline(module,!1,i,!0),s=formatButton(i,r.status,"btnStatus_","btnStatus","modalStatus")}var n='<img src="'+uploadDir+'.thumbs/images/member/avatar.png" class="thumbInTable" />';""!=r.thumbnail&&(n='<img src="'+r.thumbnail+'" class="thumbInTable" />'),jQuery("#jqgrid").jqGrid("setRowData",e[t],{status:s,thumbnail:n,act:a})}click_btnInGrid("btnStatus","modalStatus",bUrl+module+"/ajax_status",function(){location.reload()})},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0}),tableCommon(),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[NO][YES]",function(){window.location.href=href},function(){})}),$("body").on("click","#btnMultiDelete",function(e){e.preventDefault(),href=$(this).attr("href"),selectedRows=jQuery(idTableList).jqGrid("getGridParam","selarrrow"),0==selectedRows.length?showSmartAlert("Error","Please select data.","[YES]"):showSmartAlert("Warning","<p>Are you sure delete data ?</p>","[NO][YES]",function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})})}if(($("#frmAdd").length>0||$("#frmEditInfo").length>0)&&(selectFile(".btnSelectThumbnail","images"),$("body").on("click",".thumbnailDel",function(e){e.preventDefault(),thumbnailWrapper=$(this).parent(".thumbnailWrapper"),inputThumbnail=thumbnailWrapper.prev().children(".inputThumbnail"),inputThumbnail.val(""),thumbnailWrapper.html("").html(defaultIMG)})),($("#frmAdd").length>0||$("#frmEditPermission").length>0)&&($("body").on("click",".permissionFull",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),$(this).is(":checked")?(permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"),permissionEdit.prop("checked","checked"),permissionDelete.prop("checked","checked")):(permissionRead.prop("checked",""),permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked",""))}),$("body").on("click",".permissionRead",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked","")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")?permissionFull.prop("checked","checked"):permissionRead.is(":checked")||(permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked",""))}),$("body").on("click",".permissionAdd",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"),permissionEdit.prop("checked",""),permissionDelete.prop("checked","")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")?permissionFull.prop("checked","checked"):permissionAdd.is(":checked")?permissionRead.is(":checked")||permissionRead.prop("checked","checked"):permissionEdit.prop("checked","")}),$("body").on("click",".permissionEdit",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"),permissionEdit.prop("checked","checked"),permissionDelete.prop("checked","")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")?permissionFull.prop("checked","checked"):permissionEdit.is(":checked")&&(permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"))}),$("body").on("click",".permissionDelete",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked","checked")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")&&permissionFull.prop("checked","checked")})),$("#frmAdd").length>0){$("body").on("focus",'input[name="password"]',function(){$(this).prop("type","password").val(""),$('input[name="confirm_password"]').prop("type","password").val("")}),$("body").on("click","#randomPass",function(){ranPass=randString(6,"alpha"),$('input[name="password"]').prop("type","text").val(ranPass),$('input[name="confirm_password"]').prop("type","text").val(ranPass)});var t=$("#frmAdd").validate({rules:{username:{required:!0,maxlength:255,remote:{url:bUrl+module+"/ajax_existed_username",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return"add"},username:function(){return $("input[name=username]").val()}}}},password:{required:!0,minlength:3,maxlength:20},confirm_password:{required:!0,minlength:3,maxlength:20,equalTo:"#appendbutton"}},messages:{username:{required:"Username is required",maxlength:"Maximum is 255 characters",remote:jQuery.validator.format('Username "{0}" is already taken')},password:{required:"Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters"},confirm_password:{required:"Confirm Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters",equalTo:"Must match with Password field"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_existed_username",type:"POST",cache:!1,dataType:"text",data:{oper:"add",username:$('input[name="username"]').val(),csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){"false"==t?(errorContent='<span for="title" class="help-block">Username "'+$("input[name=username]").val()+'" is already taken</span>',$("input[name=username]").closest(".form-group").removeClass("has-success").addClass("has-error"),$("input[name=username]").after(errorContent)):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}})}if($("#frmEditInfo").length>0)var t=$("#frmEditInfo").validate({rules:{username:{required:!0,maxlength:255,remote:{url:bUrl+module+"/ajax_existed_username",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return"edit"},username:function(){return $("input[name=username]").val()},id:function(){return $("input[name=id]").val()}}}}},messages:{username:{required:"Username is required",maxlength:"Maximum is 255 characters",remote:jQuery.validator.format('Username "{0}" is already taken')}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_existed_username",type:"POST",cache:!1,dataType:"text",data:{oper:"edit",username:$('input[name="username"]').val(),id:$('input[name="id"]').val(),csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){"false"==t?(errorContent='<span for="title" class="help-block">Username "'+$("input[name=username]").val()+'" is already taken</span>',$("input[name=username]").closest(".form-group").removeClass("has-success").addClass("has-error"),$("input[name=username]").after(errorContent)):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});if($("#frmEditPassword").length>0){$("body").on("focus",'input[name="password"]',function(){$(this).prop("type","password").val(""),$('input[name="confirm_password"]').prop("type","password").val("")}),$("body").on("click","#randomPass",function(){ranPass=randString(6),$('input[name="password"]').prop("type","text").val(ranPass),$('input[name="confirm_password"]').prop("type","text").val(ranPass)});var t=$("#frmEditPassword").validate({rules:{old_password:{required:!0,maxlength:255},password:{required:!0,minlength:3,maxlength:20},confirm_password:{required:!0,minlength:3,maxlength:20,equalTo:"#appendbutton"}},messages:{old_password:{required:"Old Password is required",maxlength:"Maximum is 255 characters"},password:{required:"New Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters"},confirm_password:{required:"Confirm Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters",equalTo:"Must match with Password field"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)}})}}}function userPage(){if($("#userPage").length>0&&(module="user",$(idTableList).length>0)){var e=":All;active:Active;inactive:Inactive";caption=captionButton(module,!1,!1),caption+=captionExport(module),jQuery(idTableList).jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","Email","Max Score","Time","Regist Datetime"],colModel:[{name:"status",index:"status",align:"center",width:"80",stype:"select",searchoptions:{sopt:["eq"],value:e}},{name:"email",index:"email",align:"left",search:!0,width:"400"},{name:"score",index:"score",align:"center",search:!0,width:"100"},{name:"time",index:"time",align:"center",search:!0,width:"100"},{name:"created_datetime",index:"created_datetime",align:"center",search:!0,width:"200"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery(idTableList).jqGrid("getDataIDs"),t=0;t<e.length;t++){var i=e[t],r=jQuery(idTableList).jqGrid("getRowData",i),a=r.id-3,s="",s=formatButton(i,r.status,"btnStatus_","btnStatus","modalStatus"),n="";""!=r.thumbnail&&(n='<img src="'+r.thumbnail+'" class="thumbInTable" />');var o=btnEditInline(module,i,!0)+bntDeleteInline(module,!1,i,!0);jQuery(idTableList).jqGrid("setRowData",e[t],{id:a,status:s,thumbnail:n,act:o})}click_btnInGrid("btnStatus","modalStatus",bUrl+module+"/ajax_status",arrClassValue_Status,function(){location.reload()})},subGrid:!0,subGridBeforeExpand:function(e,t){},subGridRowExpanded:function(e,t){var i,r;i=e+"_t",r="p_"+i,$("#"+e).html("<table id='"+i+"' class='scroll subTable'></table><div id='"+r+"' class='scroll'></div>"),jQuery("#"+i).jqGrid({url:bUrl+module+"/ajax_sublist?q=2&id="+t,datatype:"json",colNames:["Score","Time","Datetime"],colModel:[{name:"total_score",index:"total_score",width:"200",align:"center"},{name:"client_time",index:"client_time",width:"200",align:"center"},{name:"created_datetime",index:"created_datetime",width:"200",align:"center"}],rownumbers:!0,rowNum:20,sortname:"id",sortorder:"asc",height:"100%",gridComplete:function(){for(var e=jQuery("#"+i).jqGrid("getDataIDs"),t=0;t<e.length;t++){var r=e[t],a=jQuery("#"+i).jqGrid("getRowData",r);""==a.total_score?ts=0:ts=a.total_score,1==a.right?right='<span class="label label-primary">TRUE</span>':right='<span class="label label-danger">FALSE</span>',jQuery("#"+i).jqGrid("setRowData",e[t],{right:right,total_score:ts})}}})},subGridRowColapsed:function(e,t){},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})},onSelectRow:function(e){}}),tableCommon(),$("body").on("click",".btnDelete",function(e){e.preventDefault(),selectedRows=jQuery(idTableList).jqGrid("getGridParam","selarrrow"),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete data ?</p>","[NO][YES]",function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})}),$("body").on("click","#btnMultiDelete",function(e){e.preventDefault(),href=$(this).attr("href"),selectedRows=jQuery(idTableList).jqGrid("getGridParam","selarrrow"),0==selectedRows.length?showSmartAlert("Error","Please select data.","[YES]"):showSmartAlert("Warning","<p>Are you sure delete data ?</p>","[NO][YES]",function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})})}}var idTableList="#jqgrid",idPager="#pjqgrid",defaultNumRows=50,defaultIMG='<img class="thumbnail" src="'+fUrl+'assets/common/images/default.jpg" />',clsTextColor_Status="txt-color-white",clsBgColor_ActiveStatus="bg-color-green",clsBgColor_InactiveStatus="bg-color-blueDark",clsBgColor_BlockStatus="bg-color-red",arrStatus=new Array;arrStatus.active=["bg-color-green","txt-color-white"],arrStatus.inactive=["bg-color-blueDark","txt-color-white"],arrStatus.block=["bg-color-red","txt-color-white"];var videoId="video",scaleFactor=.25,snapshots=[];$(document).ready(function(){$("body").on("click","a.jarviswidget-fullscreen-btn",function(){var e=$(this).closest(".jarviswidget");e.find(".ui-jqgrid-view, .ui-jqgrid-hdiv, .ui-jqgrid-bdiv").css({width:"100%"})}),$(".btnCancel").length>0&&$(".btnCancel").click(function(){window.history.back()}),init_Radio(),0==$("#login_form").length&&"undefined"!=typeof replyErrorContent&&null!==replyErrorContent&&""!==replyErrorContent&&showSmartAlert("Error",replyErrorContent,"[YES]"),$("#frmImport").length>0&&($("body").on("click","a#btnImport",function(e){e.preventDefault(),$('input[name="importFile"]').click()}),$("body").on("change",'input[name="importFile"]',function(e){processing_on(),$("#frmImport").submit()})),pageSetUp(),positiveInteger(),setOrder(),$("#login_form").length>0&&(valid_login(),refresh_captcha()),dashboardPage(),memberPage(),userPage()});