function showSmartAlert(e,t,a,r,i,n){$("body").css({overflow:"hidden"}),$.SmartMessageBox({title:e,content:t,buttons:a},function(e){"YES"===e?"function"==typeof r&&r():"NO"===e?"function"==typeof i&&i():"CANCEL"===e&&"function"==typeof n&&n(),$("body").css({overflow:"auto"})})}function replySuccess(e){return htmlStr='<div class="row reply">',htmlStr+='<div class="alert alert-success alert-block">',htmlStr+='<a class="close" data-dismiss="alert" href="#">×</a>',htmlStr+='<h4 class="alert-heading">Success!</h4>',htmlStr+=e,htmlStr+="</div>",htmlStr+="</div>",htmlStr}function replyError(e){return htmlStr='<div class="row reply">',htmlStr+='<div class="alert alert-danger alert-block">',htmlStr+='<a class="close" data-dismiss="alert" href="#">×</a>',htmlStr+='<h4 class="alert-heading">Error!</h4>',htmlStr+=e,htmlStr+="</div>",htmlStr+="</div>",htmlStr}function tableCommon(){jQuery(idTableList).jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,defaultSearch:"cn"}),$(".ui-jqgrid").removeClass("ui-widget ui-widget-content"),$(".ui-jqgrid-view").children().removeClass("ui-widget-header ui-state-default"),$(".ui-jqgrid-labels, .ui-search-toolbar").children().removeClass("ui-state-default ui-th-column ui-th-ltr"),$(".ui-jqgrid-pager").removeClass("ui-state-default"),$(".ui-jqgrid").removeClass("ui-widget-content"),$(".ui-jqgrid-htable").addClass("table table-bordered table-hover"),$(".ui-jqgrid-btable").addClass("table table-bordered table-striped"),$(".ui-pg-div").removeClass().addClass("btn btn-sm btn-primary"),$(".ui-icon.ui-icon-plus").removeClass().addClass("fa fa-plus"),$(".ui-icon.ui-icon-pencil").removeClass().addClass("fa fa-pencil"),$(".ui-icon.ui-icon-trash").removeClass().addClass("fa fa-trash-o"),$(".ui-icon.ui-icon-search").removeClass().addClass("fa fa-search"),$(".ui-icon.ui-icon-refresh").removeClass().addClass("fa fa-refresh"),$(".ui-icon.ui-icon-disk").removeClass().addClass("fa fa-save").parent(".btn-primary").removeClass("btn-primary").addClass("btn-success"),$(".ui-icon.ui-icon-cancel").removeClass().addClass("fa fa-times").parent(".btn-primary").removeClass("btn-primary").addClass("btn-danger"),$(".ui-icon.ui-icon-seek-prev").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-prev").removeClass().addClass("fa fa-backward"),$(".ui-icon.ui-icon-seek-first").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-first").removeClass().addClass("fa fa-fast-backward"),$(".ui-icon.ui-icon-seek-next").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-next").removeClass().addClass("fa fa-forward"),$(".ui-icon.ui-icon-seek-end").wrap("<div class='btn btn-sm btn-default'></div>"),$(".ui-icon.ui-icon-seek-end").removeClass().addClass("fa fa-fast-forward"),$(window).on("resize.jqGrid",function(){$(idTableList).jqGrid("setGridWidth",$("#content").width())})}function actionSaveRow(e){jQuery(idTableList).jqGrid("saveRow",e,{aftersavefunc:function(e,t){responseText=$.parseJSON(t.responseText),"OK"==responseText.text?($(".reply").length>0&&$(".reply").remove(),$("#widget-grid").prepend(replySuccess("Edit data successful."))):($(".reply").length>0&&$(".reply").remove(),$("#widget-grid").prepend(replyError("Error edit data.")))}})}function captionButton(e,t,a){return caption="",1==t&&1==permissionsMember[e][2]&&(caption+='<a id="btnAdd" href="'+bUrl+e+'/add" class="btnTop btn btn-success"><i class="fa fa-plus"></i> Add</a>'),1==a&&1==permissionsMember[e][4]&&(caption+='<a id="btnMultiDelete" href="#" class="btnTop btn btn-danger"><i class="fa fa-trash-o"></i> Delete</a>'),caption}function captionExport(e){return'<a id="btnExport" href="'+bUrl+e+'/export_db" class="btnTop pull-right btn btn-primary"><i class="fa fa-cloud-download"></i> Export</a>'}function captionImport(e){return'<a id="btnImport" href="#" class="btnTop pull-right btn btn-default"><i class="fa fa-cloud-upload"></i> Import</a>'}function btnEditInline(e,t,a){return buttons="",1==a&&1==permissionsMember[e][3]&&(buttons+='<a href="'+bUrl+e+"/edit/"+t+'" data-id="'+t+'" class="btn btn-primary btn-xs btnEdit"><i class="fa fa-edit"></i></a>'),buttons}function bntDeleteInline(e,t,a,r){return buttons="",1==r&&1==permissionsMember[e][4]&&(0==t?buttons+='<a href="'+bUrl+e+"/delete/"+a+'" data-id="'+a+'" class="btn btn-danger btn-xs btnDelete"><i class="fa fa-trash-o"></i></a>':buttons+='<a href="'+bUrl+t+"/delete/"+a+'" data-id="'+a+'" class="btn btn-danger btn-xs btnDelete"><i class="fa fa-trash-o"></i></a>'),buttons}function set_NewRadio(e,t,a,r){activeClass="";for(value in a)t==value&&(activeClass=a[value],activeClass+=" "+r);$("."+e+' label:has(input[value="'+t+'"])').addClass("active").addClass(activeClass),$("."+e+' label:has(input[value="'+t+'"])').children("input").attr("checked","checked")}function click_NewRadio(e,t,a){$("."+e).on("click",".btn",function(){for(value in t)$("."+e).find("."+t[value]).removeClass(t[value]).removeClass(a).removeClass("active");set_NewRadio(e,$(this).children("input").val(),t,a)})}function formatButton(e,t,a,r,i,n,s){activeClass="";for(value in n)t==value&&(activeClass=n[value],activeClass+=" "+s);return fa='<button id="'+a+e+'" class="btn '+r+" "+activeClass+'" data-id="'+e+'" data-toggle="modal" data-target="#'+i+'">',fa+=t,fa+="</button>",fa}function click_btnInGrid(e,t,a,r,i){var n;$("."+e).click(function(){n=$(this).attr("id"),$("#"+t+" .modal-content").position({my:"left top",at:"left top",of:$(this)})}),$("#"+t).parent().on("webkitTransitionEnd oTransitionEnd transitionend msTransitionEnd",function(){-1==$("#"+t).attr("class").indexOf("in")&&$("#"+t+" .modal-content").css({left:"0px",top:"0px"})}),$("#"+t+" .btn").click(function(){var e=$("#"+n).html(),s=$(this).attr("data-value");$("#"+t).modal("hide"),e!=s&&(id=$("#"+n).attr("data-id"),$.ajax({url:a,type:"POST",cache:!1,dataType:"text",data:{id:id,value:s,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){if("true"==t){for(value in r)e==value&&(removeClass=r[value]),s==value&&(activeClass=r[value]);$("#"+n).removeClass(removeClass),$("#"+n).addClass(activeClass),$("#"+n).html(s),"function"==typeof i&&i()}else"false"==t?showSmartAlert("Error","Can send data. Please contact to admin.","[YES]"):showSmartAlert("Error","You does not have permission to edit data. Please contact to admin.","[YES]")},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}}))})}function statusAdd(){$("#statusAdd").length>0&&(set_NewRadio("statusWrapper","active",arrClassValue_Status,classTextColor_Status),click_NewRadio("statusWrapper",arrClassValue_Status,classTextColor_Status))}function statusEdit(){$("#statusEdit").length>0&&(set_NewRadio("statusWrapper",$('.statusWrapper label.active input[name="status"]').val(),arrClassValue_Status,classTextColor_Status),click_NewRadio("statusWrapper",arrClassValue_Status,classTextColor_Status))}function treeView(){$(".tree").length>0&&($(".tree").find("li").addClass("parent_li").attr("role","treeitem").children("span").on("click",function(){$(".tree").find("li").children("span").removeClass("label-success"),$(this).addClass("label-success"),$("input[name=parent_id]").val($(this).attr("data-id"))}),$("body").on("click",".tree ul li span i",function(){sub=$(this).parent("span").parent("li").children("ul"),-1!=$(this).attr("class").indexOf("fa-minus-circle")?("undefined"!=sub&&sub.hide("fast"),$(this).removeClass().addClass("fa fa-sm fa-plus-circle")):("undefined"!=sub&&sub.show("fast"),$(this).removeClass().addClass("fa fa-sm fa-minus-circle"))}),$(".tree").find("li:has(ul)").each(function(){$(this).children("span").children("i").removeClass("fa-plus-circle").addClass("fa-minus-circle")}))}function positiveInteger(){$(".positive-integer").length>0&&$(".positive-integer").numeric({decimal:!1,negative:!1},function(){this.value="",this.focus()})}function openKCFinder(e,t,a){window.KCFinder={callBack:function(t){e.val(t),window.KCFinder=null,"function"==typeof a&&a()}},"images"==t?window.open(libsUrl+"kcfinder/browse.php?type=images&dir=images/public","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600"):"docs"==t&&window.open(libsUrl+"kcfinder/browse.php?type=docs&dir=docs/public","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}function openKCFinderMulti(e,t){window.KCFinder={callBackMultiple:function(t){window.KCFinder=null,e.value="",elementWrapper=e.parentElement.nextElementSibling,inputMulti=e.nextElementSibling.nextElementSibling,deletedImages=elementWrapper.nextElementSibling,arr=new Array,null!=deletedImages?action="edit":(action="add",elementWrapper.innerHTML="");for(var a=0;a<t.length;a++)arr.push(t[a]),elemItem=document.createElement("div"),elemItem.setAttribute("class","imageItem"),elemImg=document.createElement("img"),elemImg.setAttribute("src",t[a]),elemDel=document.createElement("i"),"edit"==action?elemDel.setAttribute("class","fa fa-trash-o iEdit"):elemDel.setAttribute("class","fa fa-trash-o"),elementWrapper.appendChild(elemItem),elemItem.appendChild(elemImg),elemItem.appendChild(elemDel);if(""!=inputMulti.value){arrOld=$.parseJSON(inputMulti.value);for(var a=0;a<arrOld.length;a++)arr.push(arrOld[a])}inputMulti.value=JSON.stringify(arr)}},"images"==t?window.open(libsUrl+"kcfinder/browse.php?type=images&dir=images/public","kcfinder_multiple","status=0, toolbar=0, location=0, menubar=1, directories=0, resizable=1, scrollbars=0, width=800, height=600"):"docs"==t&&window.open(libsUrl+"kcfinder/browse.php?type=docs&dir=docs/public","kcfinder_multiple","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}function selectFile(e,t){$("body").on("click",e,function(){inputField=$(this).parent().prev(".inputThumbnail"),"images"==t&&(thumbnailWrapper=$(this).parent().parent().next(".thumbnailWrapper")),openKCFinder(inputField,t,function(){filename=inputField.val(),"images"==t&&(typeDir="images/",htmlImg='<img src="'+filename+'" />',htmlDel='<a class="thumbnailDel"><i class="fa fa-trash-o"></i></a>',thumbnailWrapper.html("").html(htmlImg+htmlDel))})})}function setOrder(){$(".orderSpinner").length>0&&($(".orderSpinner").spinner({min:0,max:99,step:1,start:1e3,numberFormat:"C"}),$("body").on("change",'input[name="order"]',function(){""==$(this).val()?$(this).val(0):$(this).val()>100&&$(this).val(99)}))}function positiveInteger(){$(".positive-integer").length>0&&$(".positive-integer").numeric({decimal:!1,negative:!1},function(){this.value="",this.focus()})}function valid_login(){$("#login_form").validate({rules:{username:{required:!0,maxlength:255},captcha:{required:!0},password:{required:!0,maxlength:255}},messages:{username:{required:"not empty",maxlength:"must less 255 characters"},password:{required:"not empty",maxlength:"must less 255 characters"},captcha:{required:"not empty"}},submitHandle:function(e){e.submit()}})}function refresh_captcha(){$("#captcha_refesh").click(function(){btnRefesh=$(this),sc=btnRefesh.prev("img").attr("id"),$.ajax({url:bUrl+"auth/ajax_captcha",type:"POST",cache:!1,dataType:"json",data:{sc:sc,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){btnRefesh.prev("img").remove(),btnRefesh.before(e),$('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci"))},error:function(){alert("Error ! Can not load data.")}})})}function dashboardPage(){$("#dashboardPage").length>0&&(module="dashboard")}function categoryPage(){if($("#categoryPage").length>0){if(module="category",$(idTableList).length>0){var e=":All;active:Active;inactive:Inactive;block:Block";caption=captionButton(module,!0,!0),jQuery(idTableList).jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","ID","Name","Parent","Order","Thumbnail","Action"],colModel:[{name:"status",index:"status",align:"center",width:"80",stype:"select",searchoptions:{sopt:["eq"],value:e}},{name:"id",index:"id",search:!0,align:"center",width:"60"},{name:"name",index:"name",align:"left",search:!0,width:"150"},{name:"parent",index:"parent",search:!0,width:"150"},{name:"order",index:"order",align:"center",search:!0,width:"60",editable:!0,editoptions:{dataInit:function(e){setTimeout(function(){$(e).numeric()},100)}}},{name:"thumbnail",index:"thumbnail",align:"center",search:!1,width:"100"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"parent",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,rowattr:function(e){return"default"==e.name?{"class":"ui-state-disabled ui-jqgrid-disablePointerEvents"}:void 0},gridComplete:function(){for(var e=jQuery(idTableList).jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],r=jQuery(idTableList).jqGrid("getRowData",a),i="";if(a>1)var i=formatButton(a,r.status,"btnStatus_","btnStatus","modalStatus",arrClassValue_Status,classTextColor_Status);var n="";""!=r.thumbnail&&(n='<img src="'+r.thumbnail+'" class="thumbInTable" />');var s="";a>1&&(s=btnEditInline(module,a,!0)+bntDeleteInline(module,!1,a,!0)),jQuery(idTableList).jqGrid("setRowData",e[t],{status:i,thumbnail:n,act:s})}click_btnInGrid("btnStatus","modalStatus",bUrl+module+"/ajax_status",arrClassValue_Status,function(){location.reload()})},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})},onSelectRow:function(e){}}),tableCommon(),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Delete a category maybe effect to another data.</p><p>[YES] : Delete all children.<br/>[NO] : Just delete this category.<br/>[CANCEL] : Cancel delete action.</p><p>Are you sure delete this data ?</p>","[YES][NO][CANCEL]",function(){window.location.href=href+"?dc=1"},function(){window.location.href=href+"?dc=0"},function(){})}),$("body").on("click","#btnMultiDelete",function(e){e.preventDefault(),href=$(this).attr("href"),selectedRows=jQuery(idTableList).jqGrid("getGridParam","selarrrow"),0==selectedRows.length?showSmartAlert("Error","Please select data.","[YES]"):showSmartAlert("Warning","<p>Delete categories maybe effect to another data.</p><p>[YES] : Delete all children.<br/>[NO] : Just delete selected categories.<br/>[CANCEL] : Cancel delete action.</p><p>Are you sure delete data ?</p>","[CANCEL][NO][YES]",function(){$("#ids").val(selectedRows)},function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})})}if(($("#addContainer").length>0||$("#editContainer").length>0)&&(treeView(),gen_url($('input[name="name"]'),$('input[name="url"]')),gen_url($('input[name="nameEN"]'),$('input[name="urlEN"]')),$('input[name="name"]').limit("200","#nameLimit"),$('input[name="url"]').limit("200","#urlLimit"),$('textarea[name="desc"]').limit("1000","#descLimit"),$('input[name="nameEN"]').limit("200","#nameENLimit"),$('input[name="urlEN"]').limit("200","#urlENLimit"),$('textarea[name="descEN"]').limit("1000","#descENLimit"),selectFile(".btnSelectThumbnail","images"),$("body").on("click",".thumbnailDel",function(e){e.preventDefault(),thumbnailWrapper=$(this).parent(".thumbnailWrapper"),inputThumbnail=thumbnailWrapper.prev().children(".inputThumbnail"),inputThumbnail.val(""),thumbnailWrapper.html("").html(defaultIMG)})),$("#addContainer").length>0)var t="add",a=$("#frmAdd").validate({rules:{name:{required:!0,maxlength:200},url:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},url:function(){return $("input[name=url]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"vn"}}}},desc:{maxlength:1e3},nameEN:{required:!0,maxlength:200},urlEN:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},url:function(){return $("input[name=urlEN]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"en"}}}},descEN:{maxlength:1e3}},messages:{name:{required:"Name is required",maxlength:"Maximum is 200 characters"},url:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL "{0}" is already taken')},desc:{maxlength:"Maximum is 1000 characters"},nameEN:{required:"Name is required",maxlength:"Maximum is 200 characters"},urlEN:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL "{0}" is already taken')},descEN:{maxlength:"Maximum is 1000 characters"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_multi_existed_inCategory",type:"POST",cache:!1,dataType:"json",data:{csrf_hash:$.cookie("csrf_cookie_ci"),oper:t,id:$("input[name=id]").val(),url:$("input[name=url]").val(),urlEN:$("input[name=urlEN]").val(),parent_id:$("input[name=parent_id]").val()},success:function(t){"1"==t.error?showSmartAlert("Error","URL VN is already taken","[YES]"):"2"==t.error?showSmartAlert("Error","URL EN is already taken","[YES]"):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});if($("#editContainer").length>0){var t="edit",r=$("input[name=id]").val();selectedItem=$(".tree").find("li > span[data-id="+r+"]"),selectedItem.parent("li").children("span").addClass("btn btn-danger disabled"),selectedItem.parent("li").find("ul").children("li").children("span").addClass("btn btn-danger disabled");var a=$("#frmEdit").validate({rules:{name:{required:!0,maxlength:200},url:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},id:r,url:function(){return $("input[name=url]").val()},parent_id:function(){return $("input[name=parent_id]").val()}}}},desc:{maxlength:1e3},nameEN:{required:!0,maxlength:200},urlEN:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},id:r,url:function(){return $("input[name=urlEN]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"en"}}}},descEN:{maxlength:1e3}},messages:{name:{required:"Name is required",maxlength:"Maximum is 200 characters"},url:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL VN "{0}" is already taken')},desc:{required:"Description is required",maxlength:"Maximum is 1000 characters"},nameEN:{required:"Name is required",maxlength:"Maximum is 200 characters"},urlEN:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL EN "{0}" is already taken')},descEN:{maxlength:"Maximum is 1000 characters"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_multi_existed_inCategory",type:"POST",cache:!1,dataType:"json",data:{csrf_hash:$.cookie("csrf_cookie_ci"),oper:t,id:r,url:$("input[name=url]").val(),urlEN:$("input[name=urlEN]").val(),parent_id:$("input[name=parent_id]").val()},success:function(t){"1"==t.error?showSmartAlert("Error","URL is already taken","[YES]"):e.submit()},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}})}}}function modulePage(){if($("#modulePage").length>0){module="module",caption=captionButton(module,!0,!1),jQuery("#jqgrid").jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Name","URL","Icon","Desc","Order","Action"],colModel:[{name:"name",index:"name",align:"left",search:!0,width:"150"},{name:"url",index:"url",align:"left",search:!0,width:"150"},{name:"icon",index:"icon",align:"center",search:!1,width:"50"},{name:"desc",index:"desc",align:"left",search:!0,width:"200"},{name:"order",index:"order",align:"center",search:!0,width:"50"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery("#jqgrid").jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],r=jQuery(idTableList).jqGrid("getRowData",a),i=btnEditInline(module,a,!0)+bntDeleteInline(module,!1,a,!0);ico='<i class="'+r.icon+'" />',jQuery("#jqgrid").jqGrid("setRowData",e[t],{act:i,icon:ico})}},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})}}),tableCommon(),$("body").on("click","#btnAdd",function(e){e.preventDefault(),location.reload()}),$("body").on("click",".btnEdit",function(e){e.preventDefault(),oper="edit",id=$(this).attr("data-id"),$.ajax({url:bUrl+module+"/ajax_getModule",type:"POST",cache:!1,dataType:"json",data:{id:id,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){if(0==e.error){$('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci"));var t=e.module;$('#frmModule input[name="name"]').val(t.name).attr("disabled","disabled"),$('#frmModule input[name="url"]').val(t.url).attr("disabled","disabled"),$('#frmModule input[name="icon"]').val(t.icon),$('#frmModule textarea[name="desc"]').val(t.desc),$('#frmModule input[name="order"]').val(t.order),$('#frmModule input[name="name"]').focus(),$('#frmModule input[name="oper"]').val("edit"),$('#frmModule input[name="id"]').val(id),$('#frmModule button[type="submit"]').html("").html('<i class="fa fa-lg fa-save"></i> Save')}else showSmartAlert("Error","Can get data. Please contact to admin.","[YES]")},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[NO][YES]",function(){window.location.href=href},function(){})}),gen_url($('input[name="name"]'),$('#frmModule input[name="url"]')),$('input[name="name"]').limit("255","#nameLimit"),$('textarea[name="desc"]').limit("1000","#descLimit");var e=$("#frmModule").validate({rules:{name:{required:!0,lettersonly:!0,remote:{url:bUrl+module+"/ajax_existed",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return oper},name:function(){return $("input[name=name]").val()}}}},url:{required:!0}},messages:{name:{required:"Name is required",lettersonly:"Name only contains letters",remote:jQuery.validator.format('Name "{0}" is already taken')},url:"Url is required"},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_existed",type:"POST",cache:!1,dataType:"text",data:{oper:oper,name:$("input[name=name]").val(),csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){"false"==t?(errorContent='<span for="name" class="help-block">Name "'+$("input[name=name]").val()+'" is already taken</span>',$("input[name=name]").closest(".form-group").removeClass("has-success").addClass("has-error"),$("input[name=name]").after(errorContent)):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});$('input[name="icon"]').click(function(){selectedIcon="",showSmartAlert("Choose icon for module <span class='selectedIcon'>your choose</span>",$(this).next(".iconWrapper").html(),"[NO][YES]",function(){$('input[name="icon"]').val(selectedIcon)}),$(".MessageBoxContainer").css({"max-height":"100%",height:"100%",top:"0"}),$(".MessageBoxMiddle").css({width:"80%",height:"100%",left:"10%"}),$(".MessageBoxMiddle .pText").next(".row").css({"max-height":"80%",height:"80%","padding-right":"5%","overflow-y":"scroll"}),$(".MessageBoxContainer").find(".demo-icon-font").each(function(){$(this).click(function(){$(".MsgTitle .selectedIcon").html("").html($(this).html()),selectedIcon=$(this).children("i").attr("class")})})})}}function memberPage(){if($("#memberPage").length>0){if(module="member",$(idTableList).length>0){var e=":All;active:Active;inactive:Inactive;block:Block";caption=captionButton(module,!0,!0),jQuery("#jqgrid").jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","ID","Username","Avatar","Created Datetime","Action"],colModel:[{name:"status",index:"status",align:"center",width:"100",stype:"select",searchoptions:{sopt:["eq"],value:e}},{name:"id",index:"id",search:!0,align:"center",width:"60"},{name:"username",index:"username",align:"left",search:!0,width:"200"},{name:"thumbnail",index:"thumbnail",align:"center",search:!1,width:"100"},{name:"created_datetime",index:"created_datetime",align:"center",search:!1,width:"150"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,rowattr:function(e){return"admin"==e.username?{"class":"ui-state-disabled ui-jqgrid-disablePointerEvents"}:void 0},loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})},gridComplete:function(){for(var e=jQuery("#jqgrid").jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],r=jQuery(idTableList).jqGrid("getRowData",a);if(r.id!=authMember.id)var i=btnEditInline(module,a,!0)+bntDeleteInline(module,!1,a,!0),n=formatButton(a,r.status,"btnStatus_","btnStatus","modalStatus",arrClassValue_Status,classTextColor_Status);else $("tr#"+r.id).children("td:eq(1)").html(""),i="",n="";var s='<img src="'+uploadDir+'.thumbs/images/member/avatar.png" class="thumbInTable" />';""!=r.thumbnail&&(s='<img src="'+r.thumbnail+'" class="thumbInTable" />'),jQuery("#jqgrid").jqGrid("setRowData",e[t],{status:n,thumbnail:s,act:i})}click_btnInGrid("btnStatus","modalStatus",bUrl+module+"/ajax_status",arrClassValue_Status)},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0}),tableCommon(),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[NO][YES]",function(){window.location.href=href},function(){})}),$("body").on("click","#btnMultiDelete",function(e){e.preventDefault(),href=$(this).attr("href"),selectedRows=jQuery(idTableList).jqGrid("getGridParam","selarrrow"),0==selectedRows.length?showSmartAlert("Error","Please select data.","[YES]"):showSmartAlert("Warning","<p>Are you sure delete data ?</p>","[NO][YES]",function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})})}if(($("#frmAdd").length>0||$("#frmEditPermission").length>0)&&($("body").on("click",".permissionFull",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),$(this).is(":checked")?(permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"),permissionEdit.prop("checked","checked"),permissionDelete.prop("checked","checked")):(permissionRead.prop("checked",""),permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked",""))}),$("body").on("click",".permissionRead",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked","")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")?permissionFull.prop("checked","checked"):permissionRead.is(":checked")||(permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked",""))}),$("body").on("click",".permissionAdd",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"),permissionEdit.prop("checked",""),permissionDelete.prop("checked","")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")?permissionFull.prop("checked","checked"):permissionAdd.is(":checked")?permissionRead.is(":checked")||permissionRead.prop("checked","checked"):permissionEdit.prop("checked","")}),$("body").on("click",".permissionEdit",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"),permissionEdit.prop("checked","checked"),permissionDelete.prop("checked","")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")?permissionFull.prop("checked","checked"):permissionEdit.is(":checked")&&(permissionRead.prop("checked","checked"),permissionAdd.prop("checked","checked"))}),$("body").on("click",".permissionDelete",function(){group=$(this).parent("label").parent(".checkbox").parent(".form-group"),permissionFull=group.find(".checkbox .permissionFull"),permissionRead=group.find(".checkbox .permissionRead"),permissionAdd=group.find(".checkbox .permissionAdd"),
permissionEdit=group.find(".checkbox .permissionEdit"),permissionDelete=group.find(".checkbox .permissionDelete"),permissionFull.is(":checked")?(permissionFull.prop("checked",""),permissionRead.prop("checked","checked"),permissionAdd.prop("checked",""),permissionEdit.prop("checked",""),permissionDelete.prop("checked","checked")):permissionRead.is(":checked")&&permissionAdd.is(":checked")&&permissionEdit.is(":checked")&&permissionDelete.is(":checked")&&permissionFull.prop("checked","checked")}),selectFile(".btnSelectThumbnail","images"),$("body").on("click",".thumbnailDel",function(e){e.preventDefault(),thumbnailWrapper=$(this).parent(".thumbnailWrapper"),inputThumbnail=thumbnailWrapper.prev().children(".inputThumbnail"),inputThumbnail.val(""),thumbnailWrapper.html("").html(defaultIMG)})),$("#frmAdd").length>0){$("body").on("focus",'input[name="password"]',function(){$(this).prop("type","password").val(""),$('input[name="confirm_password"]').prop("type","password").val("")}),$("body").on("click","#randomPass",function(){ranPass=randString(6,"alpha"),$('input[name="password"]').prop("type","text").val(ranPass),$('input[name="confirm_password"]').prop("type","text").val(ranPass)});var t=$("#frmAdd").validate({rules:{username:{required:!0,maxlength:255,remote:{url:bUrl+module+"/ajax_existed_username",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return"add"},username:function(){return $("input[name=username]").val()}}}},password:{required:!0,minlength:3,maxlength:20},confirm_password:{required:!0,minlength:3,maxlength:20,equalTo:"#appendbutton"}},messages:{username:{required:"Username is required",maxlength:"Maximum is 255 characters",remote:jQuery.validator.format('Username "{0}" is already taken')},password:{required:"Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters"},confirm_password:{required:"Confirm Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters",equalTo:"Must match with Password field"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_existed_username",type:"POST",cache:!1,dataType:"text",data:{oper:"add",username:$('input[name="username"]').val(),csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){"false"==t?(errorContent='<span for="title" class="help-block">Username "'+$("input[name=username]").val()+'" is already taken</span>',$("input[name=username]").closest(".form-group").removeClass("has-success").addClass("has-error"),$("input[name=username]").after(errorContent)):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}})}if($("#frmEditInfo").length>0)var t=$("#frmEditInfo").validate({rules:{username:{required:!0,maxlength:255,remote:{url:bUrl+module+"/ajax_existed_username",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return"edit"},username:function(){return $("input[name=username]").val()},id:function(){return $("input[name=id]").val()}}}}},messages:{username:{required:"Username is required",maxlength:"Maximum is 255 characters",remote:jQuery.validator.format('Username "{0}" is already taken')}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_existed_username",type:"POST",cache:!1,dataType:"text",data:{oper:"edit",username:$('input[name="username"]').val(),id:$('input[name="id"]').val(),csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){"false"==t?(errorContent='<span for="title" class="help-block">Username "'+$("input[name=username]").val()+'" is already taken</span>',$("input[name=username]").closest(".form-group").removeClass("has-success").addClass("has-error"),$("input[name=username]").after(errorContent)):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});if($("#frmEditPassword").length>0){$("body").on("focus",'input[name="password"]',function(){$(this).prop("type","password").val(""),$('input[name="confirm_password"]').prop("type","password").val("")}),$("body").on("click","#randomPass",function(){ranPass=randString(6),$('input[name="password"]').prop("type","text").val(ranPass),$('input[name="confirm_password"]').prop("type","text").val(ranPass)});var t=$("#frmEditPassword").validate({rules:{old_password:{required:!0,maxlength:255},password:{required:!0,minlength:3,maxlength:20},confirm_password:{required:!0,minlength:3,maxlength:20,equalTo:"#appendbutton"}},messages:{old_password:{required:"Old Password is required",maxlength:"Maximum is 255 characters"},password:{required:"New Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters"},confirm_password:{required:"Confirm Password is required",minlength:"Minimum is 255 characters",maxlength:"Maximum is 255 characters",equalTo:"Must match with Password field"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)}})}}}function servicePage(){if($("#servicePage").length>0){if(module="service",$(idTableList).length>0){var e=":All;active:Active;inactive:Inactive;block:Block";caption=captionButton(module,!0,!0),jQuery(idTableList).jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","ID","Title","Category","Order","Thumbnail","Action"],colModel:[{name:"status",index:"status",align:"center",width:"80",stype:"select",searchoptions:{sopt:["eq"],value:e}},{name:"id",index:"id",search:!0,align:"center",width:"60"},{name:"title",index:"title",align:"left",search:!0,width:"150"},{name:"categoryName",index:"categoryName",search:!0,width:"150"},{name:"order",index:"order",align:"center",search:!0,width:"60",editable:!0,editoptions:{dataInit:function(e){setTimeout(function(){$(e).numeric()},100)}}},{name:"thumbnail",index:"thumbnail",align:"center",search:!1,width:"100"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"desc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery(idTableList).jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],r=jQuery(idTableList).jqGrid("getRowData",a),i="",i=formatButton(a,r.status,"btnStatus_","btnStatus","modalStatus",arrClassValue_Status,classTextColor_Status),n="";""!=r.thumbnail&&(n='<img src="'+r.thumbnail+'" class="thumbInTable" />');var s=btnEditInline(module,a,!0)+bntDeleteInline(module,!1,a,!0);jQuery(idTableList).jqGrid("setRowData",e[t],{status:i,thumbnail:n,act:s})}click_btnInGrid("btnStatus","modalStatus",bUrl+module+"/ajax_status",arrClassValue_Status,function(){location.reload()})},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})},onSelectRow:function(e){}}),tableCommon(),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete data ?</p>","[NO][YES]",function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})}),$("body").on("click","#btnMultiDelete",function(e){e.preventDefault(),href=$(this).attr("href"),selectedRows=jQuery(idTableList).jqGrid("getGridParam","selarrrow"),0==selectedRows.length?showSmartAlert("Error","Please select data.","[YES]"):showSmartAlert("Warning","<p>Are you sure delete data ?</p>","[NO][YES]",function(){$("#ids").val(selectedRows),$("#frmTopButtons").submit()},function(){})})}if(($("#addContainer").length>0||$("#editContainer").length>0)&&($("body").on("click",".category",function(){$(".category").removeClass("btn-success"),$(this).addClass("btn-success"),$('input[name="category"]').val($(this).attr("data-save")),index=$(this).index(),$(".chooseDate").removeClass("showChooseDate"),$("#inputDateWrapper").find(".chooseDate:eq("+index+")").addClass("showChooseDate")}),$('input[name="title"]').mouseenter(function(){}),gen_url($('input[name="title"]'),$('input[name="url"]')),gen_url($('input[name="titleEN"]'),$('input[name="urlEN"]')),$('input[name="title"]').limit("200","#titleLimit"),$('input[name="url"]').limit("200","#urlLimit"),$('textarea[name="desc"]').limit("1000","#descLimit"),$('input[name="titleEN"]').limit("200","#titleENLimit"),$('input[name="urlEN"]').limit("200","#urlENLimit"),$('textarea[name="descEN"]').limit("1000","#descENLimit"),selectFile(".btnSelectThumbnail","images"),$("body").on("click",".thumbnailDel",function(e){e.preventDefault(),thumbnailWrapper=$(this).parent(".thumbnailWrapper"),inputThumbnail=thumbnailWrapper.prev().children(".inputThumbnail"),inputThumbnail.val(""),thumbnailWrapper.html("").html(defaultIMG)}),CKEDITOR.replace("contentService",{entities_latin:!1,entities_greek:!1,toolbar:"Full"}),CKEDITOR.replace("contentServiceEN",{entities_latin:!1,entities_greek:!1,toolbar:"Full"})),$("#addContainer").length>0)var t="add",a=$("#frmAdd").validate({rules:{title:{required:!0,maxlength:200},url:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},url:function(){return $("input[name=url]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"vn"}}}},desc:{maxlength:1e3},titleEN:{required:!0,maxlength:200},urlEN:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},url:function(){return $("input[name=urlEN]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"en"}}}},descEN:{maxlength:1e3}},messages:{title:{required:"Name is required",maxlength:"Maximum is 200 characters"},url:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL "{0}" is already taken')},desc:{maxlength:"Maximum is 1000 characters"},titleEN:{required:"Name is required",maxlength:"Maximum is 200 characters"},urlEN:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL "{0}" is already taken')},descEN:{maxlength:"Maximum is 1000 characters"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_multi_existed_inCategory",type:"POST",cache:!1,dataType:"json",data:{csrf_hash:$.cookie("csrf_cookie_ci"),oper:t,id:$("input[name=id]").val(),url:$("input[name=url]").val(),urlEN:$("input[name=urlEN]").val(),parent_id:$("input[name=parent_id]").val()},success:function(t){"1"==t.error?showSmartAlert("Error","URL VN is already taken","[YES]"):"2"==t.error?showSmartAlert("Error","URL EN is already taken","[YES]"):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});if($("#editContainer").length>0)var t="edit",r=$("input[name=id]").val(),a=$("#frmEdit").validate({rules:{title:{required:!0,maxlength:200},url:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},id:r,url:function(){return $("input[name=url]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"vn"}}}},desc:{maxlength:1e3},titleEN:{required:!0,maxlength:200},urlEN:{required:!0,maxlength:200,remote:{url:bUrl+module+"/ajax_existed_inCategory",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return t},id:r,url:function(){return $("input[name=urlEN]").val()},parent_id:function(){return $("input[name=parent_id]").val()},lang:function(){return"en"}}}},descEN:{maxlength:1e3}},messages:{title:{required:"Name is required",maxlength:"Maximum is 200 characters"},url:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL "{0}" is already taken')},desc:{maxlength:"Maximum is 1000 characters"},titleEN:{required:"Name is required",maxlength:"Maximum is 200 characters"},urlEN:{required:"URL is required",maxlength:"Maximum is 200 characters",remote:jQuery.validator.format('URL "{0}" is already taken')},descEN:{maxlength:"Maximum is 1000 characters"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_multi_existed_inCategory",type:"POST",cache:!1,dataType:"json",data:{csrf_hash:$.cookie("csrf_cookie_ci"),oper:t,id:r,url:$("input[name=url]").val(),urlEN:$("input[name=urlEN]").val(),parent_id:$("input[name=parent_id]").val()},success:function(t){"1"==t.error?showSmartAlert("Error","URL VN is already taken","[YES]"):"2"==t.error?showSmartAlert("Error","URL EN is already taken","[YES]"):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}})}}function userPage(){if($("#userPage").length>0&&(module="user",$(idTableList).length>0)){var e=":All;active:Active;inactive:Inactive";caption=captionButton(module,!1,!1),caption+=captionExport(module),jQuery(idTableList).jqGrid({url:bUrl+module+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","ID","Title","Service","Fullname","Phone"],colModel:[{name:"status",index:"status",align:"center",width:"80",stype:"select",searchoptions:{sopt:["eq"],value:e}},{name:"id",index:"id",search:!0,align:"center",width:"60"},{name:"title",index:"title",align:"left",search:!0,width:"150"},{name:"service",index:"service",search:!0,width:"150"},{name:"fullname",index:"fullname",search:!0,width:"150"},{name:"phone",index:"phone",search:!0,width:"150"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"desc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery(idTableList).jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],r=jQuery(idTableList).jqGrid("getRowData",a),i="",i=formatButton(a,r.status,"btnStatus_","btnStatus","modalStatus",arrClassValue_Status,classTextColor_Status),n="";""!=r.thumbnail&&(n='<img src="'+r.thumbnail+'" class="thumbInTable" />');var s=btnEditInline(module,a,!0)+bntDeleteInline(module,!1,a,!0);jQuery(idTableList).jqGrid("setRowData",e[t],{status:i,thumbnail:n,act:s})}click_btnInGrid("btnStatus","modalStatus",bUrl+module+"/ajax_status",arrClassValue_Status,function(){location.reload()})},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})},onSelectRow:function(e){}}),tableCommon()}}var idTableList="#jqgrid",idPager="#pjqgrid",defaultNumRows=50,classTextColor_Status=classTextColor_Position="txt-color-white",arrClassValue_Status=new Array;arrClassValue_Status.active="bg-color-green",arrClassValue_Status.inactive="bg-color-blueDark",arrClassValue_Status.block="bg-color-red",$(document).ready(function(){$(".btnCancel").length>0&&$(".btnCancel").click(function(){window.history.back()}),0==$("#login_form").length&&null!=replyErrorContent&&void 0!=replyErrorContent&&""!=replyErrorContent&&showSmartAlert("Error",replyErrorContent,"[YES]"),$("#frmImport").length>0&&($("body").on("click","a#btnImport",function(e){e.preventDefault(),$('input[name="importFile"]').click()}),$("body").on("change",'input[name="importFile"]',function(e){$("#frmImport").submit()})),pageSetUp(),positiveInteger(),setOrder(),statusAdd(),statusEdit(),$("#login_form").length>0&&(valid_login(),refresh_captcha()),dashboardPage(),categoryPage(),modulePage(),memberPage(),servicePage(),userPage()});