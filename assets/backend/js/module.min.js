caption=captionButton(!0,!1),jQuery("#jqgrid").jqGrid({url:bUrl+currentModule.url+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Name","URL","Icon","Desc","Order","Action"],colModel:[{name:"name",index:"name",align:"left",search:!0,width:"150"},{name:"url",index:"url",align:"left",search:!0,width:"150"},{name:"icon",index:"icon",align:"center",search:!1,width:"50"},{name:"desc",index:"desc",align:"left",search:!0,width:"200"},{name:"order",index:"order",align:"center",search:!0,width:"50"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery("#jqgrid").jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],n=jQuery(idTableList).jqGrid("getRowData",a);if(a>6)var r=btnEditInline(a)+bntDeleteInline(a);else var r="";ico='<i class="'+n.icon+'" />',jQuery("#jqgrid").jqGrid("setRowData",e[t],{act:r,icon:ico})}},ajaxRowOptions:{async:!0},caption:caption,multiselect:!1,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})}}),tableCommon(),$("body").on("click","#btnAdd",function(e){e.preventDefault(),location.reload()}),$("body").on("click",".btnEdit",function(e){e.preventDefault(),oper="edit",id=$(this).attr("data-id"),$.ajax({url:bUrl+module+"/ajax_getModule",type:"POST",cache:!1,dataType:"json",data:{id:id,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){if(0==e.error){$('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci"));var t=e.module;$('#frmModule input[name="name"]').val(t.name).attr("disabled","disabled"),$('#frmModule input[name="url"]').val(t.url).attr("disabled","disabled"),$('#frmModule input[name="icon"]').val(t.icon),$('#frmModule textarea[name="desc"]').val(t.desc),$('#frmModule input[name="order"]').val(t.order),$('#frmModule input[name="name"]').focus(),$('#frmModule input[name="oper"]').val("edit"),$('#frmModule input[name="id"]').val(id),$('#frmModule button[type="submit"]').html("").html('<i class="fa fa-lg fa-save"></i> Save')}else showSmartAlert("Error","Can get data. Please contact to admin.","[YES]")},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[NO][YES]",function(){window.location.href=href},function(){})}),gen_url($('input[name="name"]'),$('#frmModule input[name="url"]')),$('input[name="name"]').limit("255","#nameLimit"),$('textarea[name="desc"]').limit("1000","#descLimit");var $validator=$("#frmModule").validate({rules:{name:{required:!0,lettersonly:!0,remote:{url:bUrl+module+"/ajax_existed",type:"post",data:{csrf_hash:function(){return $.cookie("csrf_cookie_ci")},oper:function(){return oper},name:function(){return $("input[name=name]").val()}}}},url:{required:!0}},messages:{name:{required:"Name is required",lettersonly:"Name only contains letters",remote:jQuery.validator.format('Name "{0}" is already taken')},url:"Url is required"},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+module+"/ajax_existed",type:"POST",cache:!1,dataType:"text",data:{oper:oper,name:$("input[name=name]").val(),csrf_hash:$.cookie("csrf_cookie_ci")},success:function(t){"false"==t?(errorContent='<span for="name" class="help-block">Name "'+$("input[name=name]").val()+'" is already taken</span>',$("input[name=name]").closest(".form-group").removeClass("has-success").addClass("has-error"),$("input[name=name]").after(errorContent)):($('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci")),e.submit())},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});$('input[name="icon"]').click(function(){selectedIcon="",showSmartAlert("Choose icon for module <span class='selectedIcon'>your choose</span>",$(this).next(".iconWrapper").html(),"[NO][YES]",function(){$('input[name="icon"]').val(selectedIcon)}),$(".MessageBoxContainer").css({"max-height":"100%",height:"100%",top:"0"}),$(".MessageBoxMiddle").css({width:"80%",height:"100%",left:"10%"}),$(".MessageBoxMiddle .pText").next(".row").css({"max-height":"80%",height:"80%","padding-right":"5%","overflow-y":"scroll"}),$(".MessageBoxContainer").find(".demo-icon-font").each(function(){$(this).click(function(){$(".MsgTitle .selectedIcon").html("").html($(this).html()),selectedIcon=$(this).children("i").attr("class")})})});