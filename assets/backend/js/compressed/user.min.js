if($(idTableList).length>0&&$(".customer_list").length>0){var statusStr=":Tất cả;active:Hiện;inactive:Ẩn";caption=captionButton(!1,!0),jQuery(idTableList).jqGrid({url:bUrl+currentModule.url+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","Họ tên","Điện thoại","Email","Địa chỉ","Quận","Tỉnh","Ngày","Action"],colModel:[{name:"status",index:"status",align:"center",width:"80",stype:"select",searchoptions:{sopt:["eq"],value:statusStr}},{name:"fullname",index:"fullname",search:!0,width:"200"},{name:"phone",index:"phone",search:!0,align:"center",width:"120"},{name:"email",index:"email",align:"center",search:!0,width:"200"},{name:"address",index:"address",align:"center",search:!0,width:"150"},{name:"district",index:"district",align:"center",search:!0,width:"100"},{name:"province",index:"province",align:"center",search:!0,width:"100"},{name:"created_datetime",index:"created_datetime",align:"center",search:!0,width:"200"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery(idTableList).jqGrid("getDataIDs"),t=0;t<e.length;t++){var r=e[t],a=jQuery(idTableList).jqGrid("getRowData",r),i=formatButton(r,a.status,"btnStatus",bUrl+currentModule.url+"/ajax_status","modalStatus"),n=btnEditInline(r)+bntDeleteInline(r);jQuery(idTableList).jqGrid("setRowData",e[t],{status:i,act:n})}click_btnInGrid("modalStatus",function(){location.reload()})},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})}}),tableCommon(),$("body").on("click",".btnDelete",function(e){e.preventDefault();var t=$(this).attr("href");showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[YES][NO]",function(){window.location.href=t},function(){})}),$("body").on("click","#btnMultiDelete",function(e){e.preventDefault();var t=$(this).attr("href"),r=jQuery(idTableList).jqGrid("getGridParam","selarrrow");0==r.length?showSmartAlert("Error","Please select data.","[YES]"):showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[YES][NO]",function(){$("#ids").val(r),$("#frmTopButtons").submit()},function(){})}),$(".tree").find("span").each(function(){$(this).click(function(){var e=$(this).attr("data-path"),t='{"groupOp":"AND", "rules":[{"field":"path","op":"cn","data": "'+e+'"}]}';jQuery(idTableList).jqGrid("setGridParam",{datatype:"json",postData:{filters:t},search:!0}).trigger("reloadGrid")})}),$("a.groupFancyBox").fancybox()}if($(".customer_form").length>0&&$(idTableList).length>0){var customer_id=$("#frmCustomer").find('input[name="customer_id"]').val(),statusStr=":Tất cả;active:Hiện;inactive:Ẩn";caption=captionButton(!1,!0),jQuery(idTableList).jqGrid({url:bUrl+currentModule.url+"/ajax_order_list?q=2&customer_id="+customer_id,datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Status","Mã đơn hàng","Total","Ngày","Địa chỉ","Quận","Tỉnh","Action"],colModel:[{name:"status",index:"status",align:"center",width:"80",stype:"select",searchoptions:{sopt:["eq"],value:statusStr}},{name:"id",index:"id",search:!0,align:"center",width:"150"},{name:"total",index:"total",search:!0,align:"center",width:"120"},{name:"created_datetime",index:"created_datetime",align:"center",search:!0,width:"200"},{name:"address",index:"address",align:"center",search:!0,width:"150"},{name:"district",index:"district",align:"center",search:!0,width:"100"},{name:"province",index:"province",align:"center",search:!0,width:"100"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"desc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery(idTableList).jqGrid("getDataIDs"),t=0;t<e.length;t++){var r=e[t],a=jQuery(idTableList).jqGrid("getRowData",r),i=formatButton(r,a.status,"btnStatus",bUrl+currentModule.url+"/ajax_status","modalStatus"),n=btnEditInline(r)+bntDeleteInline(r);jQuery(idTableList).jqGrid("setRowData",e[t],{status:i,act:n})}click_btnInGrid("modalStatus",function(){location.reload()})},ajaxRowOptions:{async:!0},caption:caption,multiselect:!0,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})}}),tableCommon()}if($("#frmCustomerAddress").length>0){$(".btnEdit").click(function(){var e=$(this).find(".address_id").html(),t=$(this).find(".address").html(),r=$(this).find(".province_id").html(),a=$(this).find(".district_id").html();$("#frmCustomerAddress").find('input[name="current_address_id"]').val(e.trim()),$("#frmCustomerAddress").find('input[name="current_address"]').val(t.trim()),$("#frmCustomerAddress").find('input[name="current_province_id"]').val(r.trim()),$("#frmCustomerAddress").find('input[name="current_district_id"]').val(a.trim())}),$("#modal_address").on("show.bs.modal",function(e){$('input[name="address"]').val($("#frmCustomerAddress").find('input[name="current_address"]').val());var t=$("#frmCustomerAddress").find('input[name="current_province_id"]').val();$('select[name="province_id"]').select2("val",t);var r=$("#frmCustomerAddress").find('input[name="current_district_id"]').val();$.ajax({url:fUrl+"ajax_get_district",type:"POST",cache:!1,dataType:"json",data:{province_id:t,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){if("object"==typeof e){var t="";$.each(e,function(e,r){t+="<option value='"+r.id+"'>"+r.text+"</option>"}),$('select[name="district_id"]').html("").html(t).promise().done(function(){$('select[name="district_id"]').select2("val",r)})}},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}),$("#frmCustomerAddress").find('select[name="province_id"]').change(function(){var e=$(this).val();$('select[name="district_id"]').select2("val",""),$.ajax({url:fUrl+"ajax_get_district",type:"POST",cache:!1,dataType:"json",data:{province_id:e,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){if("object"==typeof e){var t="";$.each(e,function(e,r){t+="<option value='"+r.id+"'>"+r.text+"</option>"}),$('select[name="district_id"]').html("").html(t)}},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})});var validator=$("#frmCustomerAddress").validate({rules:{address:{required:!0,maxlength:512},province_id:{required:!0},district_id:{required:!0}},messages:{address:{required:"Địa chỉ bắt buộc nhập",maxlength:"Tối đa 512 ký tự"},province_id:{required:"Tỉnh/Thành phố bắt buộc chọn"},district_id:{required:"Tỉnh/Thành phố bắt buộc chọn"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){var t=$('input[name="current_address_id"]').val();return $.ajax({url:bUrl+"customer/update_customer_address",type:"POST",cache:!1,dataType:"json",data:{csrf_hash:$.cookie("csrf_cookie_ci"),address_id:t,province_id:$('select[name="province_id"]').select2("val"),district_id:$('select[name="district_id"]').select2("val"),address:$('input[name="address"]').val()},success:function(e){"1"==e.err?showSmartAlert("Error",e.msg,"[YES]"):window.location.href=bUrl+currentModule.url+"/edit/"+t},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}}),!1}})}