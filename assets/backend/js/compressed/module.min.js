caption=captionButton(!1,!1),jQuery("#jqgrid").jqGrid({url:bUrl+currentModule.url+"/ajax_list?q=2",datatype:"json",height:"auto",autowidth:!0,shrinkToFit:!1,gridResize:!0,autoResizeAllColumns:!0,iconSet:"fontAwesome",colNames:["Name","URL","Icon","Desc","Order","Action"],colModel:[{name:"name",index:"name",align:"left",search:!0,width:"150"},{name:"url",index:"url",align:"left",search:!0,width:"150"},{name:"icon",index:"icon",align:"center",search:!1,width:"50"},{name:"desc",index:"desc",align:"left",search:!0,width:"200"},{name:"order",index:"order",align:"center",search:!0,width:"50"},{name:"act",index:"act",editable:!1,search:!1,width:"80",align:"center"}],rownumbers:!0,rowNum:defaultNumRows,rowList:[10,20,defaultNumRows],pager:idPager,sortname:"id",sortorder:"asc",toolbarfilter:!0,viewrecords:!0,gridComplete:function(){for(var e=jQuery("#jqgrid").jqGrid("getDataIDs"),t=0;t<e.length;t++){var a=e[t],n=jQuery(idTableList).jqGrid("getRowData",a);if(a>6)var r=btnEditInline(a)+bntDeleteInline(a);else var r="";ico='<i class="'+n.icon+'" />',jQuery("#jqgrid").jqGrid("setRowData",e[t],{act:r,icon:ico})}},ajaxRowOptions:{async:!0},caption:caption,multiselect:!1,loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css({"text-align":"center"})}}),tableCommon(),$("body").on("click",".btnClear",function(e){e.preventDefault(),$('input[name="name_module"], input[name="url"], input[name="icon"], input[name="id"]').val(""),$('textarea[name="desc"]').val(""),$('input[name="order"]').val(0),$("#frmModule").find('input[name="name_module"]').focus()}),$("body").on("click",".btnEdit",function(e){e.preventDefault(),id=$(this).attr("data-id"),$.ajax({url:bUrl+"module/ajax_get_module",type:"POST",cache:!1,dataType:"json",data:{id:id,csrf_hash:$.cookie("csrf_cookie_ci")},success:function(e){if(1==e.err)showSmartAlert("Error",e.msg,"[YES]");else{$('input[name="csrf_hash"]').val($.cookie("csrf_cookie_ci"));var t=e.module;$('#frmModule input[name="name_module"]').val(t.name).attr("disabled","disabled"),$('#frmModule input[name="url"]').val(t.url).attr("disabled","disabled"),$('#frmModule input[name="icon"]').val(t.icon),$('#frmModule textarea[name="desc"]').val(t.desc),$('#frmModule input[name="order"]').val(t.order),$('#frmModule input[name="id"]').val(id)}},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}),$("body").on("click",".btnDelete",function(e){e.preventDefault(),href=$(this).attr("href"),showSmartAlert("Warning","<p>Are you sure delete this data ?</p>","[NO][YES]",function(){window.location.href=href},function(){})}),gen_url($('input[name="name_module"]'),$('#frmModule input[name="url"]')),$('input[name="name_module"]').limit("255","#name_module_limit"),$('textarea[name="desc"]').limit("1000","#desc_limit");var validator=$("#frmModule").validate({rules:{name_module:{required:!0,lettersonly:!0},url:{required:!0}},messages:{name_module:{required:"Name is required",lettersonly:"Name only contains letters"},url:"Url is required"},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$.ajax({url:bUrl+"module/submit",type:"POST",cache:!1,dataType:"json",data:{csrf_hash:$.cookie("csrf_cookie_ci"),id:$('input[name="id"]').val(),name:$('input[name="name_module"]').val(),url:$('input[name="url"]').val(),icon:$('input[name="icon"]').val(),desc:$('textarea[name="desc"]').val(),order:$('input[name="order"]').val()},success:function(e){"1"==e.err?showSmartAlert("Error",e.msg,"[YES]"):window.location.href=bUrl+currentModule.url},error:function(){showSmartAlert("Error","Can send data. Please contact to admin.","[YES]")}})}});$('input[name="icon"]').click(function(){selectedIcon="",showSmartAlert("Choose icon for module <span class='selectedIcon'>your choose</span>",$(this).next(".iconWrapper").html(),"[NO][YES]",function(){$('input[name="icon"]').val(selectedIcon)}),$(".MessageBoxContainer").css({"max-height":"100%",height:"100%",top:"0"}),$(".MessageBoxMiddle").css({width:"80%",height:"100%",left:"10%"}),$(".MessageBoxMiddle .pText").next(".row").css({"max-height":"80%",height:"80%","padding-right":"5%","overflow-y":"scroll"}),$(".MessageBoxContainer").find(".demo-icon-font").each(function(){$(this).click(function(){$(".MsgTitle .selectedIcon").html("").html($(this).html()),selectedIcon=$(this).children("i").attr("class")})})});